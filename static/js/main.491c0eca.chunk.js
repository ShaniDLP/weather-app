(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{16:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},64:function(e){e.exports=JSON.parse("{}")},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),r=a.n(n),s=a(13),i=a.n(s),o=(a(38),a.p,a(39),a(6)),l=a(8),d=a.n(l),j=a(14),u="CHANGE_CITY",p="UPDATE_FAVORITES",h="TOGGLE_PAGES",O="HIDE_ERROR",b="FETCH_AUTOCOMPLETE",y="FETCH_AUTOCOMPLETE_SUCCESS",m="FETCH_AUTOCOMPLETE_ERROR",g="FETCH_DAILY_WEATHER",v="FETCH_DAILY_WEATHER_SUCCESS",f="FETCH_DAILY_ERROR",E="FETCH_WEEKLY_WEATHER",x="FETCH_WEEKLY_WEATHER_SUCCESS",T="FETCH_WEEKLY_WEATHER_ERROR",w=a(9),C=a.n(w),N=a(5),S=a(31),_=a(32),R=a(3),k={loading:!0,togglePages:!1,query:"London",cities:[],city_key:"328328",city_name:"London",selectedKey:"215854",selectedCity:"Tel Aviv",iconNumber:"01",currentDailyTemp:"--",currentWeeklyTemp:["--"],currentWeeklyForecast:[],displayFavorites:!1,isSelectedInFavorites:!1,showError:!1,errorMessage:""},F=Object(N.combineReducers)({weatherList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(R.a)(Object(R.a)({},e),{},{loading:!1,searchOptions:t.payload});case y:return Object(R.a)(Object(R.a)({},e),{},{loading:!1,selectedCity:t.payload.Name,selectedKey:t.payload.Key,searchOptions:[]});case m:return{loading:!1,showError:!0,errorMessage:t.payload};case u:return Object(R.a)(Object(R.a)({},e),{},{query:t.payload,loading:!1});case p:return Object(R.a)(Object(R.a)({},e),{},{isSelectedInFavorites:t.payload});case g:return Object(R.a)(Object(R.a)({},e),{},{loading:!0,currentDailyTemp:t.payload});case v:return console.log("FETCH_DAILY_WEATHER_SUCCESS",t.payload),Object(R.a)(Object(R.a)({},e),{},{currentDailyTemp:t.payload.temp,iconNumber:t.payload.icon,loading:!1});case f:return console.log("FETCH_DAILY_WEATHER_ERROR"),Object(R.a)(Object(R.a)({},e),{},{loading:!1,showError:!0,errorMessage:t.payload});case E:return Object(R.a)(Object(R.a)({},e),{},{loading:!0});case x:return console.log("WEEKLY",t.payload),Object(R.a)(Object(R.a)({},e),{},{currentWeeklyForecast:t.payload,loading:!1});case T:return console.log("FETCH_WEEKLY_WEATHER_ERROR"),Object(R.a)(Object(R.a)({},e),{},{loading:!1,showError:!0,errorMessage:t.payload});case h:return Object(R.a)(Object(R.a)({},e),{},{togglePages:t.payload});case O:return console.log("HIDE ERROR"),Object(R.a)(Object(R.a)({},e),{},{showError:!1});default:return e}}}),H=[S.a],L=Object(N.createStore)(F,{},Object(_.composeWithDevTools)(N.applyMiddleware.apply(void 0,H))),W="NmTutitlyJjHxUpR37kM6MbLEc6JEgmb",A=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=L.getState(),c=a.weatherList,n=c.selectedKey,console.log("getWeather - selectedKey",n),t(I(n)),t(D(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("dailyWeather",e),t.next=3,C.a.get("https://dataservice.accuweather.com/currentconditions/v1/"+e+"?apikey="+W);case 3:c=t.sent,a({type:g});try{a({type:v,payload:{temp:c.data[0].Temperature.Metric.Value,icon:c.data[0].WeatherIcon}})}catch(n){a({type:f,payload:n}),setTimeout((function(){a({type:O})}),5e3)}case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("weeklyWeather",e),t.next=3,C.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/"+e+"?apikey="+W+"&metric=true");case 3:c=t.sent,console.log(c+" ApiService weekly"),a({type:E});try{a({type:x,payload:c.data.DailyForecasts})}catch(n){a({type:T,payload:n}),setTimeout((function(){a({type:O})}),5e3)}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},M=a(7),K=a(10),J=(a(16),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),P=function(e){var t=e.data;return Object(c.jsx)("ul",{children:t.map((function(e,t){return Object(c.jsx)("div",{className:"weatherItems",children:Object(c.jsxs)("li",{children:[Object(c.jsxs)("span",{className:"forecastHeadline",children:[" ",J[new Date(e.Date).getDay()]]}),Object(c.jsxs)("div",{className:"iconAndTemp",children:[e.Temperature.Maximum.Value,"\xb0",Object(c.jsx)("span",{className:"weeklyIcon",children:Object(c.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(("00"+e.Day.Icon).slice(-"00".length),"-s.png"),alt:""})})]})]})},t)}))})},Y=(a(64),a(65),a(20)),U=function(){return Object(c.jsxs)("div",{className:"externalLinks",children:[Object(c.jsx)("a",{href:"https://www.linkedin.com/in/shanip27",id:"linkedin",children:Object(c.jsx)(M.a,{icon:Y.b})}),Object(c.jsx)("a",{href:"https://github.com/shanipj",id:"github",children:Object(c.jsx)(M.a,{icon:Y.a})})]})},G=(a(66),function(){var e=localStorage.getItem("state");return e?(e=JSON.parse(e),Object(c.jsx)("div",{id:"favoritesContainer",children:Object(c.jsx)("ul",{children:e.map((function(e,t){return Object(c.jsxs)("li",{className:"weatherItems",children:[Object(c.jsxs)("span",{className:"forecastHeadline",children:[" ",e.name]}),Object(c.jsx)("div",{className:"iconAndTemp",children:Object(c.jsx)("span",{className:"weeklyIcon",children:"icon"})})]},t)}))})})):Object(c.jsx)("div",{id:"favoritesContainer",children:"There are no favorites at the moment"})});a(67);var q=function(){var e=Object(o.b)(),t=L.getState().weatherList.searchOptions,a=function(t,a){console.log(t,a),e({type:y,payload:{Key:t,Name:a}}),e(A())},n=function(t){var a=t.target.value;a.length<3?e({type:b,payload:[]}):C.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=NmTutitlyJjHxUpR37kM6MbLEc6JEgmb&q="+a).then((function(e){return r(e.data)}))},r=function(t){if(!(t.length<=0)){var n=t.map((function(e){return Object(c.jsx)("div",{onClick:function(){return a(e.Key,e.LocalizedName)},children:e.LocalizedName},e.Key)}));e({type:b,payload:n})}};return Object(c.jsxs)("div",{id:"searchBar",children:[Object(c.jsx)("form",{onSubmit:a,children:Object(c.jsx)("input",{type:"text",placeholder:"Search City",onChange:n,id:"searchinput"})}),Object(c.jsx)("div",{id:"searchWrapper",children:Object(c.jsx)("div",{id:"searchResult",children:t})})]})},B=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.weatherList})),a=(t.loading,t.selectedKey),r=t.selectedCity,s=t.currentDailyTemp,i=t.showError,l=t.errorMessage,d=t.iconNumber,j=t.togglePages,u=t.isSelectedInFavorites,O=t.currentWeeklyForecast;Object(n.useEffect)((function(){e(A())}),[e]);var b="https://developer.accuweather.com/sites/default/files/".concat(d,"-s.png");return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"mainPage"}),Object(c.jsxs)("header",{children:[Object(c.jsxs)("span",{onClick:function(){e({type:h,payload:!1})},children:[Object(c.jsxs)("span",{children:[" ",Object(c.jsx)(M.a,{icon:K.b})]}),Object(c.jsx)("span",{className:"navbar",children:"Home"})]}),Object(c.jsxs)("span",{onClick:function(){e({type:h,payload:!0})},children:[Object(c.jsxs)("span",{children:[" ",Object(c.jsx)(M.a,{icon:K.a})]}),Object(c.jsx)("span",{className:"navbar",children:"My Favorites "})]})]}),Object(c.jsxs)("div",{className:j?"hide":"show",children:[Object(c.jsx)(q,{}),Object(c.jsxs)("div",{className:"dailyWeather",children:[Object(c.jsx)("span",{id:"cityName",children:r}),Object(c.jsx)("div",{className:"addFavorite",children:Object(c.jsx)(M.a,{icon:K.a,className:u?"inFavorites":"",onClick:function(){return function(){console.log(r,a);try{var t=localStorage.getItem("state"),c=!1;if(!t){var n=[{key:a,name:r}],s=JSON.stringify(n);localStorage.setItem("state",s),c=!0}if(c)return;var i=[],o=!0,l=JSON.parse(t);console.log("going over array"),l.forEach((function(e){e.key!=a?i.push(e):o=!1,console.log("removing",e.name)})),o&&(console.log("adding city",r),i.push({key:a,name:r})),localStorage.setItem("state",JSON.stringify(i)),e({type:p,payload:o})}catch(d){return void console.log("couldn't open storage")}}()}})}),Object(c.jsx)("div",{id:"currentDailyTemp",children:Object(c.jsxs)("span",{children:[s,"\xb0"]})}),Object(c.jsx)("div",{className:"icon",children:Object(c.jsx)("img",{src:b,alt:""})}),Object(c.jsx)("div",{class:"clear"})]}),Object(c.jsx)("div",{className:"weeklyWeather",children:Object(c.jsx)(P,{data:O})})]}),Object(c.jsx)("div",{className:j?"show":"hide",children:Object(c.jsx)(G,{})}),Object(c.jsx)(U,{}),Object(c.jsx)("div",{id:"errorWrapper",children:Object(c.jsx)("div",{id:"errorToast",className:i?"show":"",children:l})})]})};var V=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(B,{})})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,69)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(o.a,{store:L,children:Object(c.jsx)(V,{})})}),document.getElementById("root")),z()}},[[68,1,2]]]);
//# sourceMappingURL=main.491c0eca.chunk.js.map